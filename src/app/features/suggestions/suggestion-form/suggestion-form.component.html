<div class="container mt-4">
  <div class="card p-4" style="max-width: 700px; margin: auto;">
    <h3 class="mb-4">{{ isEditMode ? '‚úèÔ∏è Modifier la Suggestion' : '‚ûï Ajouter une Suggestion' }}</h3>

    <form [formGroup]="suggestionForm" (ngSubmit)="onSubmit()">

      <div class="mb-3">
        <label class="form-label text-primary">Titre :</label>
        <input type="text" class="form-control" formControlName="title"
               [ngClass]="{'is-invalid': title?.invalid && title?.touched}">
        <div class="invalid-feedback" *ngIf="title?.touched">
          <span *ngIf="title?.errors?.['required']">Le titre est obligatoire.</span>
          <span *ngIf="title?.errors?.['minlength']">Minimum 5 caract√®res.</span>
          <span *ngIf="title?.errors?.['pattern']">Doit commencer par une majuscule et contenir uniquement des lettres.</span>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label text-primary">Description :</label>
        <textarea class="form-control" formControlName="description" rows="3"
                  [ngClass]="{'is-invalid': description?.invalid && description?.touched}">
        </textarea>
        <div class="invalid-feedback" *ngIf="description?.touched">
          <span *ngIf="description?.errors?.['required']">La description est obligatoire.</span>
          <span *ngIf="description?.errors?.['minlength']">Minimum 30 caract√®res.</span>
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label text-primary">Cat√©gorie :</label>
        <select class="form-select" formControlName="category"
                [ngClass]="{'is-invalid': category?.invalid && category?.touched}">
          <option value="">-- S√©lectionnez une cat√©gorie --</option>
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
        <div class="invalid-feedback">La cat√©gorie est obligatoire.</div>
      </div>

      <!-- Status modifiable en mode edit -->
      <div class="mb-3" *ngIf="isEditMode">
        <label class="form-label text-primary">Status :</label>
        <select class="form-select" formControlName="status">
          <option value="en_attente">En attente</option>
          <option value="acceptee">Accept√©e</option>
          <option value="refusee">Refus√©e</option>
        </select>
      </div>

      <!-- Status readonly en mode add -->
      <div class="mb-3" *ngIf="!isEditMode">
        <label class="form-label text-primary">Status :</label>
        <input type="text" class="form-control" formControlName="status" readonly>
      </div>

      <div class="mb-3">
        <label class="form-label text-primary">Date :</label>
        <input type="text" class="form-control" formControlName="date">
      </div>

      <div class="d-flex gap-2">
        <button type="submit" class="btn btn-primary" [disabled]="suggestionForm.invalid">
          {{ isEditMode ? 'üíæ Save' : 'Soumettre' }}
        </button>
        <button type="button" class="btn btn-secondary" [routerLink]="['/suggestions']">
          Annuler
        </button>
      </div>

    </form>
  </div>
</div>